<!DOCTYPE html> <html lang="en" style><!--
 Page saved with SingleFile 
 url: https://www.arp242.net/why-zsh.html 
 saved date: Wed Sep 14 2022 16:21:57 GMT+0000 (Coordinated Universal Time)
--><head><meta charset="utf-8">
	
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>s/bash/zsh/g</title>
	
	<link rel="alternate" type="application/rss+xml" title="arp242.net" href="https://www.arp242.net/feed.xml">
	<link rel="canonical" href="https://www.arp242.net/why-zsh.html">
	<meta name="author" content="Martin Tournoij">

	<style>html{text-size-adjust:none;-webkit-text-size-adjust:none;font:16px/180%"Libre Baskerville","DejaVu Serif","Bitstream Vera Serif","Georgia",serif}@media (max-width:54em){html{font-size:14px;line-height:160%}}@media (max-width:26em){html{font-size:14px;line-height:150%}}pre,code{font-family:"DejaVu Sans Mono","Bitstream Vera Sans Mono","Consolas",monospace}pre{font-size:14px;line-height:130%}h1{font-variant-ligatures:common-ligatures discretionary-ligatures;font-feature-settings:"liga"on,"dlig"on}*{box-sizing:border-box}*:target{background-color:#ff6}html{background-color:#eee;color:#252525;tab-size:4;-moz-tab-size:4}html,body{margin:0}.page{max-width:54rem;position:relative}.center-flex{display:flex;justify-content:center;margin:.5rem 0}@media (max-width:46em){.center-flex{display:block}}.page{padding:1rem 4rem;background-color:#fff;box-shadow:0 0 6px rgba(0,0,0,.2)}@media (max-width:65em){.page{padding:.5rem 1rem;max-width:100%}}@media (max-width:54em){.page{max-width:100%;padding:.5rem 1rem}}@page{margin:0}a{color:#00f;text-decoration:none;transition:color .2s}a:hover{text-decoration:underline;color:#6491ff}h1{text-align:center;padding:.5em 0;font-size:1.7em}img{max-width:100%}figure{text-align:center}code,pre{background-color:#f5f5f5;color:#000}pre{overflow:auto;max-height:500px;padding:.5em 1em;border-radius:2px;background-color:#fff;border:2px solid #d5d5d5;box-shadow:inset 0px 0px 2px rgba(0,0,0,.2)}code{padding:1px 2px}pre>code{padding:0;box-shadow:none;border:none}pre code{background-color:inherit;text-decoration:none}sup{height:0;line-height:1;vertical-align:baseline;position:relative}sup{bottom:1ex}hr{border:none;text-align:center;font-size:60px;color:#252525;opacity:.9}hr:before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMC4yIDkuMiIgaGVpZ2h0PSIzNC44IiB3aWR0aD0iMTE0LjMiPjxwYXRoIGQ9Ik0xMy4yIDBxMS4xIDAgMS4zIDEuMiAwIDEtLjcgMS4yLTEuOC40LTIgLjggMi42LjMgMy4yIDMuMWguMmwuMi44LS40LjFxLS4yIDEuOC0xLjggMS45LTEgMC0xLjMtMSAwLS44LjItLjguMi40LjguNC44IDAgMS0uOFExMSA2LjEgMTEgMy43cS0xLjQgMC0yLjEgMSAxLjQuNyAxLjQgMS44LS4xIDIuNS0zLjYgMi43US41IDkuMiAwIDUuNXEwLS42LjctLjcuNSAwIC42LjV2LjJsLS4xLjRxMCAxIDEuMSAxIDEgMCAxLS43UTQgMS4yIDcgMXEyIC4xIDIgMS43di4xcTAgLjQtLjQgMS41IDEtLjggMi0xIC42IDAgLjYtLjQuOC0xIDEuNi0xLjMuNi0uNC42LS44bC0uMi0uNHEtLjItLjMgMC0uNHptLTEuNiAzLjd2LjFxMCAxLjQgMi4zIDIuMi0uMy0yLTIuMy0yLjN6Ii8+PHBhdGggZD0iTTE3IDBxLTEgMC0xLjMgMS4yIDAgMSAuOCAxLjIgMS44LjQgMiAuOC0yLjcuMy0zLjIgMy4xSDE1bC0uMi44LjUuMXEuMiAxLjggMS44IDEuOSAxIDAgMS4yLTEgMC0uOC0uMi0uOC0uMS40LS43LjQtLjkgMC0xLS44IDIuNy0uOCAyLjgtMy4yIDEuNCAwIDIgMS0xLjMuNy0xLjMgMS44IDAgMi41IDMuNSAyLjcgNi40IDAgNi44LTMuNyAwLS42LS42LS43LS42IDAtLjcuNXYuMmwuMi40cTAgMS0xLjIgMS0uOSAwLTEtLjctLjYtNS0zLjctNS4yLTIgLjEtMiAxLjd2LjFxMCAuNC40IDEuNS0xLS44LTItMS0uNiAwLS42LS40LS43LTEtMS41LTEuMy0uNi0uNC0uNi0uOGwuMi0uNHEuMi0uMyAwLS40em0xLjcgMy43di4xcTAgMS40LTIuNCAyLjIuMy0yIDIuNC0yLjN6Ii8+PC9zdmc+)}.postscript{margin-top:3em;border-top:1px solid #bbb;font-size:.9em;position:relative}.postscript+.postscript{margin-top:2em}.postscript>strong{font-style:normal;position:absolute;top:-1em;left:1em;background-color:#fff;padding:0 .5em}.postscript>p{margin:1em 2em!important}@media (min-width:54rem){.postscript{margin-left:-4em;width:calc(100% + 8em);padding:0 4em}.postscript>strong{left:6em}}#header{text-align:center;margin-bottom:2em}#header h1,#header p{margin:0}.hatnote{font-style:italic;margin-bottom:14px}nav{padding-left:.5em;max-width:69rem;margin:.5rem auto}nav a{font-weight:bold}.side{width:15em;margin-left:1em;margin-right:1em;flex-shrink:0}.side p{hyphens:auto}.side p.no-hyphen{hyphens:none}.side figure{position:relative;margin:0;line-height:0}.shadow{box-shadow:inset 0 0 10px rgba(0,0,0,.1);position:absolute;top:0;left:0;right:0;bottom:0}.side-sep{border-top:1px solid #aaa}@media (max-width:46em){.side{margin-top:2em;width:auto;display:flex;justify-content:space-between}.side>div{margin:0 1em}.side img{width:500px}.side>div>p:first-child,.side>div>div:first-child{margin-top:0;padding-top:0}}@media (max-width:46em) and (min-width:35em){.side>div>div:last-child{display:none}}@media (max-width:35em){.side{flex-wrap:wrap;text-align:center}.side>div{margin:0 auto}.side figure{margin-bottom:1em}.side img{max-width:20em}}#disclaimer{font-size:14px;color:#666;padding-left:1em;max-width:69rem;margin:.5rem auto}ul.posts{list-style:none;padding-left:0}.posts li>span{font-family:monospace;color:#aaa;margin-right:.5em}@media (max-width:46rem){.posts li{padding-left:7.3em;text-indent:-7.3em}}.page+.page{margin-top:2em}.related-posts .posts{margin-top:0}@media (max-width:68rem){pre{white-space:pre-wrap}}@media (max-width:46em){pre{white-space:pre}}.pre-wrap{position:relative}.Statement{color:#af5f00}.Comment{color:#0000ee}.Constant{color:#cd0000}.PreProc{color:#cd00cd}.ModeMsg{color:#666666}.Question{color:#00006b}@media (max-width:54em){.page p{margin-top:0}}@media (min-width:46em){article{max-width:calc(100% - 17em)}}</style>
<link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAMFBMVEUAAAAdISMbIy4jJSMvMjI9P0BLS0RLTUpLUFVWW2FdXFptb26VlJKwoJXCuazn18w7jQUuAAAAP0lEQVQI12NgwAWYYfQMKMMyAEJLTAQSHDMPce0UADJau7/u3wgSCNB+dRYswKC6LBGkroFB2VgAokWQgVgAAK99DG7/4O8zAAAAAElFTkSuQmCC"><style>.sf-hidden{display:none!important}</style><meta http-equiv="content-security-policy" content="default-src 'none'; font-src 'self' data:; img-src 'self' data:; style-src 'unsafe-inline'; media-src 'self' data:; script-src 'unsafe-inline' data:;"><style>img[src="data:,"],source[src="data:,"]{display:none!important}</style></head>

<body>
	<nav><a href="https://www.arp242.net/">Home</a></nav>
<div class="center-flex">
	<article>
		<div class="page">
			<header id="header">
				<h1>s/bash/zsh/g</h1>
				<p>Written on 20 Oct 2021</p>
			</header>
			<div class="hatnote"><p>Discussions:
  <a href="https://news.ycombinator.com/item?id=28927966">Hacker News</a></p>
</div>
			<p>You would expect this to work, no?</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">bash% </span><span class="Question">echo $(( .1 + .2 ))</span>
bash: .1 + .2 : syntax error: operand expected (error token is ".1 + .2 ")
</code></pre>
</div>

<p>Well, bash says no, but zsh just works:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">zsh% </span><span class="Question">echo $(( .1 + .2 ))</span>
0.30000000000000004     <span class="Comment"> # Well, "works" insofar IEEE-754 works.</span>
</code></pre>
</div>

<p>There is simply no way you can do calculations with fractions in bash without
relying on <code>bc</code>, <code>dc</code>, or some hacks. Compared to simply being able to use <code>a +
b</code> it’s ugly, slow, and difficult.</p>

<p>There are other pretty frustrating omissions in bash; NUL bytes is another fun
one:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">zsh% </span><span class="Question">x=$(printf 'N\x00L'); printf $x | xxd -g1 -c3</span>
00000000: 4e 00 4c  N.L

<span class="ModeMsg">bash% </span><span class="Question">x=$(printf 'N\x00L'); printf $x | xxd -g1 -c3</span>
bash: warning: command substitution: ignored null byte in input
00000000: 4e 4c     NL
</code></pre>
</div>

<p>It looks like bash added a warning recently-ish (<a href="https://github.com/bminor/bash/commit/280bd77d8d3e7f7c90c9fa07de3d1e8f8e18ac29">4.4-patch 2</a>); this one
bit me pretty hard a few years ago; back then it would just get silently
discarded without warning; I guess a warning is an “improvement” of sorts
(fixing it, however, would be an actual improvement<sup id="fnref:n" role="doc-noteref"><a href="#fn:n" class="footnote" rel="footnote">[1]</a></sup>).</p>

<p>NUL bytes aren’t <em>that</em> uncommon, think of e.g. <code>find -print0</code>, <code>xargs -0</code>, etc.
That all works grand, right up to the point you try to assign it to a variable.
You can use NUL bytes for array assignments though, if you evoke the right
incantation:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">bash% </span><span class="Question">read -rad arr &lt; &lt;(find . -type f -print0)</span>
</code></pre>
</div>

<p>There are all sorts of edge-cases where you need to resort to <code>read</code> or
<code>readarray</code> rather than being able to just assign in. In zsh it’s:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">zsh% </span><span class="Question">arr=(**/*(.))</span>

<span class="ModeMsg">zsh% </span><span class="Question">IFS='\x00' arr=($(find . -type f -print0))</span><span class="Comment"> # If you must use find (rarely needed)</span>

<span class="ModeMsg">zsh% </span><span class="Question">arr=( "${(0)$(find . -type f -print0)}" )</span>
</code></pre>
</div>

<p>That <code>(.)</code> is a “glob qualifier” to include only regular files – more on that
later.</p>

<p>Don’t even think of doing something like:</p>

<div class="pre-wrap">
<pre class="hl  ft-zsh"><code>img=<span class="PreProc">$(</span>curl https://example.com/image.png<span class="PreProc">)</span>
<span class="Statement">if</span> [[ <span class="PreProc">$cond</span> ]]; <span class="Statement">then</span>
    optpng <span class="Statement">&lt;&lt;&lt;</span><span class="Constant">"</span><span class="PreProc">$img</span><span class="Constant">"</span> <span class="Statement">&gt;</span> out.png
<span class="Statement">else</span>
    cat <span class="Statement">&lt;&lt;&lt;</span><span class="Constant">"</span><span class="PreProc">$img</span><span class="Constant">"</span> <span class="Statement">&gt;</span> out.png
<span class="Statement">fi</span>
</code></pre>
</div>

<p>Of course you can refactor this to avoid the variable (and the example is a bit
contrived), but it really ought to work. I once wrote a script to import emails
from the Mailgun API. It worked great, yet sometimes images were mangled and I
just couldn’t figure out why. Turns out Mailgun “helpfully” decodes attachments
(i.e. removes the base64) and sends binary content, which bash (at the time)
would silently discard. It took me a very long time to figure out. I forgot why,
but it was hard to avoid storing the response in a variable. I ended up
rewriting it to Python because of this, which was just a waste of time really.
It’s this, specifically, that really soured me on bash and prompted <a href="https://www.arp242.net/shell-scripting-trap.html">The shell
scripting trap</a> in 2017. However, many items listed there are solved by
zsh, including this one.</p>

<hr>

<p>zsh also fixes <em>most</em> of the quoting:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">zsh% </span><span class="Question">for f in *; ls -l $f</span>
-rw-rw-r-- 1 martin martin 0 Oct 19 06:51 asd.txt
-rw-rw-r-- 1 martin martin 0 Oct 19 06:51 with space.txt

<span class="ModeMsg">bash% </span><span class="Question">for f in *; do ls -l $f; done</span>
-rw-rw-r-- 1 martin martin 0 Oct 19 06:51 asd.txt
ls: cannot access 'with': No such file or directory
ls: cannot access 'space.txt': No such file or directory
</code></pre>
</div>

<p>It’s not POSIX compatible, but who cares? bash doesn’t <a href="https://tiswww.case.edu/php/chet/bash/POSIX">follow POSIX in all
sorts of ways by default</a> either because it just makes more sense, and with
both you can still tell them to be POSIX-compatible if you must for one reason
or the other.</p>

<p>Also note the convenient short version of the
<code>for</code> loop: no need for <code>do</code>, <code>done</code> and muckery with <code>;</code> before the <code>done</code>,
which is much more convenient for quick one-liners you interactively type in.
You can still do word splitting, but you need to do it explicitly:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">zsh% </span><span class="Question">for i in *; ls -l $=i</span>
-rw-rw-r-- 1 martin martin 0 Oct 19 06:51 asd.txt
ls: cannot access 'with': No such file or directory
ls: cannot access 'space.txt': No such file or directory
</code></pre>
</div>

<p><code>[[</code> is supposed to fix <code>[</code>, but it still has weird quoting quirks:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">zsh% </span><span class="Question">a=foo; b=*;</span>
<span class="ModeMsg">zsh% </span><span class="Question">if [[ $a = $b ]]; then</span>
       print 'Equal!'
     else
       print 'Nope!'
     fi
Nope!

<span class="ModeMsg">bash% </span><span class="Question">a=foo; b=*</span>
<span class="ModeMsg">bash% </span><span class="Question">if [[ $a = $b ]]; then</span>
        echo 'Equal!'
      else
        echo 'Nope!'
      fi
Equal!
</code></pre>
</div>

<p>This is equal because without quotes it still interprets the right-hand side as
a pattern (i.e. glob). In zsh you need to use <code>$~var</code> to explicitly enable
pattern matching, which is a much better model than remembering when you do and
don’t need to quote things – sometimes you <em>do</em> want the pattern matching and
then you don’t want quotes; it’s not always immediately obvious if an <code>if [[ ...</code>
statement is correct if it’s lacking quotes.</p>

<p>“But Martin, you should always quote things, you’re being disingenuous!” Well, I
could make a comfortable living if I were paid to add quotes to other people’s
shell scripts. Telling people to “always quote things” is what we’ve been doing
for 40 years now and irrefutable observational evidence has demonstrated that it
<em>just does not work</em>.</p>

<p>Most people aren’t shell scripting wizards; they make a living writing Python or
C or Go or PHP programs, or maybe they’re sysadmins or scientists, and oh,
occasionally they also write a shell script. They just see something that works
and assume it has sane behaviour and don’t realize the subtle differences
between <code>$@</code>, <code>$*</code>, and <code>"$@"</code>. I think that’s actually quite reasonable,
because the behaviour is odd, surprising, and confusing.</p>

<p>It’s also a lot more complex than just “quote your variables”, especially if you
use <code>$(..)</code> since command substitution often needs quotes too, as well as any
variables inside it. Before you know it you’ve got double, triple, or more
levels of nested quotes and if you forget one set of them you’re in trouble.</p>

<p>It’s such a fertile source of real-world bugs that it would merit entomologist
examination. If there’s a system that causes this many bugs then that system is
at fault, and not the people using it. Computers and software should adapt to
humans, not the other way around.</p>

<p>And “always quote things!” isn’t even right either, because you should always
quote things except when you shouldn’t:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">zsh% </span><span class="Question">a=foo; b=.*;</span>
<span class="ModeMsg">zsh% </span><span class="Question">if [[ "$a" =~ "$b" ]]; then</span>
       print 'Equal!'
     else
       print 'Nope!'
     fi
Equal!

<span class="ModeMsg">bash% </span><span class="Question">a=foo; b=.*</span>
<span class="ModeMsg">bash% </span><span class="Question">if [[ "$a" =~ "$b" ]]; then</span>
        echo 'Equal!'
      else
        echo 'Nope!'
      fi
Nope!
</code></pre>
</div>

<p>If there are quotes around a regexp then it’s treated as a literal string. I
mean, it’s consistent with <code>=</code> pattern matching, but also confusing because I
explicitly use <code>=~</code> to match a regular expression.</p>

<p>Another famous quoting trap is <code>$@</code> vs. <code>"$@"</code> vs. <code>$*</code> vs. <code>"$*"</code>:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">zsh% </span><span class="Question">cat args</span>
echo "unquoted @:"
for a in $@; do echo "  =&gt; $a"; done

echo "quoted @:"
for a in "$@"; do echo "  =&gt; $a"; done

echo "quoted *:"
for a in $*; do echo "  =&gt; $a"; done

echo "quoted *:"
for a in "$*"; do echo "  =&gt; $a"; done
</code></pre>
</div>

<!-- -->

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code>bash% bash args hello world 'test space' '*'
unquoted @:
  =&gt; hello
  =&gt; world
  =&gt; test
  =&gt; space
  =&gt; Guust1129.jpg
  =&gt; IEEESTD.2019.8766229.pdf
  [.. rest of my $HOME ..]
quoted @:
  =&gt; hello
  =&gt; world
  =&gt; test space
  =&gt; *
unquoted *:
  =&gt; hello
  =&gt; world
  =&gt; test
  =&gt; space
  =&gt; Guust1129.jpg
  =&gt; IEEESTD.2019.8766229.pdf
  [.. rest of my $HOME ..]
quoted *:
  =&gt; hello world test space *
</code></pre>
</div>

<p>Experiences shellers will know to (almost) always use <code>"$@"</code>, but how often do
you see it being done wrong? It’s not that strange people do it wrong either; if
you learned about quoting and word splitting then <code>$@</code> without quotes is
actually the <em>logical</em> thing to use because you would expect <code>"$@"</code> to be
treated as one argument (as <code>"$*"</code>). You tell people to “always add quotes to
prevent word splitting and treat things as a single argument”, and then you tell
them “oh, except in this one special case when the addition of quotes <em>invokes</em>
a special kind of splitting and doesn’t follow any of the rules we previously
told you about”.</p>

<p>In zsh, <code>$@</code> and <code>$*</code> (and <code>$argv</code>) are all (read-only) arrays and it all
behaves identical as you would expect with no surprises:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">zsh% </span><span class="Question">zsh args hello world 'test space' '*'</span>
unquoted @:
  =&gt; hello
  =&gt; world
  =&gt; test space
  =&gt; *
quoted @:
  =&gt; hello
  =&gt; world
  =&gt; test space
  =&gt; *
unquoted *:
  =&gt; hello
  =&gt; world
  =&gt; test space
  =&gt; *
quoted *:
  =&gt; hello world test space *
</code></pre>
</div>

<p>Actually in bash you can do <code>argv=("$@")</code> and then you have an array. This is
really how it should work by default.</p>

<p>You still need to loop over it with:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">bash% </span><span class="Question">for a in "${argv[@]}"; do</span>
        echo "=&gt; $a"
      done
</code></pre>
</div>

<p>Rather than just <code>for a in $argv</code> like in zsh. Aside from the pointless <code>[@]</code>,
why would you ever want to word-split every element of an array? There is
probably some use case somewhere, but it’s exceedingly rare. Better to just skip
all of that by default unless explicitly enabled with <code>=</code> and/or <code>~</code>.</p>

<p>Oh, here’s another interesting tidbit:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">zsh% </span><span class="Question">n=3; for i in {1..$n}; print $i</span>
1
2
3

<span class="ModeMsg">bash% </span><span class="Question">n=3; for i in {1..$n}; do echo "$i"; done</span>
{1..3}

<span class="ModeMsg">bash% </span><span class="Question">n=3; for i in {1..3}; do echo "$i"; done</span>
1
2
3
</code></pre>
</div>

<p>Why does it work like that? That’s left as an exercise for the reader ;-)</p>

<hr>

<p>Aside from all sorts caveats that are handled much better, a lot of common
things are just much easier in zsh:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">zsh% </span><span class="Question">arr=(123 5 1 9)</span>
<span class="ModeMsg">zsh% </span><span class="Question">echo ${(o)arr}    </span><span class="Comment"> # Lexical order</span>
1 123 5 9
<span class="ModeMsg">zsh% </span><span class="Question">echo ${(on)arr}   </span><span class="Comment"> # Numeric order</span>
1 5 9 123

<span class="ModeMsg">bash% </span><span class="Question">IFS=$'\n'; echo "$(sort &lt;&lt;&lt;"${arr[*]}")"; unset IFS</span>
1 123 5 9
<span class="ModeMsg">bash% </span><span class="Question">IFS=$'\n'; echo "$(sort -n &lt;&lt;&lt;"${arr[*]}")"; unset IFS</span>
1 5 9 123
</code></pre>
</div>

<p>I had to look up how to do it in bash; the Stack Overflow answer for that one
starts with “you don’t really need all that much code”. lol? I guess that’s in
reply to some of the other horrendously complex answers which implement “pure
bash” sorting algorithms and the like. I guess compared to that this is “not
that much code”. And of course the entire thing is a minefield of expansion
again; and if you forget a set of nested quotes you end up in trouble.</p>

<p>Arrays in general are just awkward in bash:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">bash% </span><span class="Question">arr=(first second third fourth)</span>

<span class="ModeMsg">bash% </span><span class="Question">echo ${arr[0]}</span>
first
<span class="ModeMsg">bash% </span><span class="Question">echo ${arr[@]::2}</span>
first second
</code></pre>
</div>

<p>I mean, it works, and it’s not that much typing, but why do I need that <code>[@]</code>?
Probably some (historical) reason, but zsh implements it much more readable and
easier:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">zsh% </span><span class="Question">arr=(first second third fourth)</span>

<span class="ModeMsg">zsh% </span><span class="Question">print ${arr[1]}       </span><span class="Comment"> # Yeah, it's 1-based. Deal with it.</span>
first
<span class="ModeMsg">zsh% </span><span class="Question">print ${arr[1,2]}</span>
first second
</code></pre>
</div>

<p>The bash array syntax was copied from ksh; so I guess we have to blame David
Korn (zsh supports it too, if you must use it). But regular subscripts are just
so much easier.</p>

<p>And then there’s the useful features:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">zsh% </span><span class="Question">ls *.go</span>
format.go  format_test.go  gen.go  old.go  uni.go  uni_test.go

<span class="ModeMsg">zsh% </span><span class="Question">ls *.go~*_test.go</span>
format.go  gen.go  old.go  uni.go

<span class="ModeMsg">zsh% </span><span class="Question">ls *.go~*_test.go~f*</span>
gen.go  old.go  uni.go
</code></pre>
</div>

<p><code>*.go</code> gets expanded, and filters the pattern after the <code>~</code>; <code>*_test.go</code> in this
case. Looks a bit obscure at first glance, but bash’s ksh-style extglobs are far
harder:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">bash% </span><span class="Question">ls !(*_test).go</span>
format.go  gen.go  old.go  uni.go

<span class="ModeMsg">bash% </span><span class="Question">ls !(*_test|f*).go</span>
gen.go  old.go  uni.go
</code></pre>
</div>

<p><code>!(..)</code> is “match anything except the pattern”; the <code>*</code> is implied here (zsh
supports <code>!(..)</code> if you set <code>ksh_glob</code>). While it works, the the
<code>pattern~filter~filter</code> model is much easier, and also more flexible since you
don’t need to start with all matches.</p>

<p>There are many useful things you can do with globbing; you can replace many uses
of <code>find</code> with it, and you don’t need to worry about the caveats, <code>-print0</code>
hacks, etc. For example to recursively list all regular files:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">zsh% </span><span class="Question">ls **/*(.)</span>
LICENSE         go.sum           unidata/gen.go             wasm/make*
README.md       old.go           unidata/gen_codepoints.go  wasm/srv*
[..]
</code></pre>
</div>

<p>Or directories:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">zsh% </span><span class="Question">ls -d /etc/**/*(/)</span>
/etc/OpenCL/                      /etc/runit/runsvdir/default/dnscrypt-proxy/log/
/etc/OpenCL/vendors/              /etc/runit/runsvdir/default/ntpd/log/
/etc/X11/                         /etc/runit/runsvdir/default/postgresql/supervise/
[..]
</code></pre>
</div>

<p>Or files that were changed in the last week:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">zsh% </span><span class="Question">ls -l /etc/***(.m-7)   </span><span class="Comment"> # *** is a shortcut for **/*; needs GLOB_STAR_SHORT</span>
-rw-r--r-- 1 root root 28099 Oct 13 03:47 /etc/dnscrypt-proxy.toml.new-2.1.1_1
-rw-r--r-- 1 root root    97 Oct 13 03:47 /etc/environment
-rw-r--r-- 1 root root 37109 Oct 17 10:34 /etc/ld.so.cache
-rw-r--r-- 1 root root 77941 Oct 19 01:01 /etc/public-resolvers.md
-rw-r--r-- 1 root root  6011 Oct 19 01:01 /etc/relays.md
-rw-r--r-- 1 root root   142 Oct 19 07:57 /etc/shells
</code></pre>
</div>

<p>You can even order them by modified date with <code>om</code> (<code>***(.m-7om)</code>), although
that’s a bit pointless here as <code>ls</code> will reorder them again, but if you’re
looping over files it’s useful.</p>

<p>There is no way to do any of this in bash, you’ll have to use something like:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">bash% </span><span class="Question">find /etc -type f -mtime 7 -exec ls -l {} +</span>
find: ‘/etc/sv/docker/supervise’: Permission denied
find: ‘/etc/sv/docker/log/supervise’: Permission denied
find: ‘/etc/sv/bluetoothd/log/supervise’: Permission denied
find: ‘/etc/sv/postgresql/supervise’: Permission denied
find: ‘/etc/sv/runsvdir-martin/supervise’: Permission denied
find: ‘/etc/wpa_supplicant/supervise’: Permission denied
find: ‘/etc/lvm/cache’: Permission denied
-rw-rw-r-- 1 root root  167 Oct 12 22:17 /etc/default/postgresql
-rw-r--r-- 1 root root  817 Oct 12 09:11 /etc/fstab
-rw-r--r-- 1 root root 1398 Oct 12 22:19 /etc/passwd
-rw-r--r-- 1 root root 1397 Oct 12 22:19 /etc/passwd.OLD
-rw-r--r-- 1 root root  307 Oct 12 23:10 /etc/public-resolvers.md.minisig
-rw-r--r-- 1 root root  297 Oct 12 23:10 /etc/relays.md.minisig
-r-------- 1 root root  932 Oct 12 09:57 /etc/shadow
-rwxrwxr-x 1 root root  397 Oct 12 22:23 /etc/sv/postgresql/run
</code></pre>
</div>

<p>Not sure how to make it ignore these errors too without redirecting stderr (more
typing!) And if you think adding single letters in <code>(..)</code> after a pattern is
hard then try understanding <code>find</code>’s weird flag syntax. Glob qualifies are
great.</p>

<p>csh-style parameter substitution is pretty useful:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">zsh% </span><span class="Question">for f in ~/photos/*.png; convert $f ${f:t:r}.jpeg</span>
</code></pre>
</div>

<p><code>:t</code> to get the tail, and <code>:r</code> to get the root (without extension). csh could do
this before I was even born, but bash can’t (it can for history expansion, but
not variables). According to the bash FAQ “Posix has specified a more powerful,
albeit somewhat more cryptic, mechanism cribbed from ksh”, which I find a
somewhat curious statement as the above in bash is:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">bash% </span><span class="Question">for f in ~/photos/*.png; do convert "$f" "$(basename "${f%%.*}")"; done</span>
</code></pre>
</div>

<p>Technically “more powerful” in the sense that you can do other things with it,
but not really “more useful for common operations” (zsh, of course, implements
<code>%</code> and <code>#</code> as well).</p>

<p>Note you can’t nest <code>${..}</code> in bash; e.g. <code>"${${f%%.*}##*/}"</code> is an error:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code><span class="ModeMsg">zsh% </span><span class="Question">f=~/asd.png; print "${${f%%.*}##*/}"</span>
asd

<span class="ModeMsg">bash% </span><span class="Question">f=~/a.png; echo "${${f%%.*}##*/}"</span>
bash: ${${f%%.*}##*/}: bad substitution
</code></pre>
</div>

<p>While this can quickly lead to very unreadable ASCII vomit, it’s useful on
occasion, when used with care and wisdom. You can click below for a more
advanced example if the children are already in bed.</p>

<div id="nsfw">
<a href="#">Click to see NSFW content. <strong>Not suitable for children under 18!</strong></a>
<p class="sf-hidden">For example, this can be used to show the longest element in an array:</p>
<div class="pre-wrap">
<pre class="sf-hidden">print ${array[(r)${(l.${#${(O@)array//?/X}[1]}..?.)}]}</pre>
</div>
<p class="sf-hidden">Cribbed from the .</p>
</div>

<style class="sf-hidden">#nsfw{text-align:center}</style>



<hr>

<p>There are many more things. I’m not going to list them all here. None of this is
new; much (if not all?) of this has around for 20 years, if not longer. I don’t
know why bash is the de-facto default, or why people spend time on complex
solutions to work around bash problems when zsh solves them. I guess because
Linux used a lot of GNU stuff and bash was came with it, and GNU stuff was (and
is) using bash. Not a very good reason, certainly not one 30 years later.</p>

<p>zsh still has plenty of limitations; the syntax isn’t always something you’d
want to show your mother for starters, as well as a number of other things.
Still, it’s <em>clearly</em> better. I genuinely can’t find a single thing bash does
better beyond “it’s installed on many systems already”.</p>

<p>Ubiquitousness is overrated anyway; zsh has no dependencies beyond libc and
curses and is 970K on my system<sup id="fnref:size" role="doc-noteref"><a href="#fn:size" class="footnote" rel="footnote">[2]</a></sup> and is available for pretty much all
systems. Compared to most other interpreters it’s tiny, with only Lua being
smaller (275K). “Stick to POSIX sh for compatibility” was good advice in 1990
when you had some SunOS system with some sun-sh and that’s what you were stuck
with. Those days are long gone, and while there are a few poor souls still suck
on those systems (sometimes even with csh!) chances are they’re not going to try
and run your Docker or Arch Linux shell script or whatnot on those systems
anyway.</p>

<p>Contorting yourself in all sorts of strange bends to perhaps possibly maybe make
it work for a tiny fraction of users who are unlikely to use your script anyway
does not seem like a good trade-off, especially since these kind of limitations
tend to be organisational rather than technical, which is not my problem anyway
to be honest.</p>

<p>Using zsh is also <em>more</em> portable; since it allows you to avoid many shell tools
and the (potential) incompatibilities, and by explicitly setting  <code>zsh</code> as the
interpreter you can rely on zsh behaviour, rather than hoping the <code>/bin/sh</code> on
$random_system behaves the same (even dash has some extensions to POSIX sh, such
as <code>local</code>).</p>

<p>What I typically do is save files as <code>script.zsh</code> with:</p>

<div class="pre-wrap">
<pre class="hl  ft-cliprompt"><code>#!/usr/bin/env zsh
[ "${ZSH_VERSION:-}" = "" ] &amp;&amp; echo &gt;&amp;2 "Only works with zsh" &amp;&amp; exit 1
</code></pre>
</div>

<p>This makes sure it gets run by zsh when used as <code>./script.zsh</code>, and gives an
error in case people type <code>sh script.zsh</code> or <code>bash script.zsh</code> in case the .zsh
extension isn’t enough of a clue.</p>

<p>So in conclusion: <code>s/bash/zsh/g</code> and everything will be just a little bit
better.</p>

<p style="font-size:.9rem;font-style:italic">
P.S. maybe fish is even better by the way, but I could never get over the bright
colouring and all these things popping in and out of my screen; it's such a
"busy" chaotic experience! I'd have to spend time disabling all that stuff to
make it usable for me, and I never bothered – and if you're disabling the key
selling points of a program then it's probably not intended for you anyway.
Maybe I'll have a crack at it at some point though.
</p>
<div class="postscript" role="doc-endnotes"><strong>Footnotes</strong>
  <ol>
    <li id="fn:n" role="doc-endnote">
      <p>Which I assume isn’t so easy, otherwise it would have been done already.
  The reason it doesn’t work is an artifact from C’s NUL-terminated strings,
  but this kind of stuff really shouldn’t be exposed in a high-level language
  like the shell. It’s also a bit ironic since one of Stephen Bourne’s
  original goals with his shell was to get rid of arbitrary size limits on
  strings, which were common at the time.&nbsp;<a href="#fnref:n" class="reversefootnote" role="doc-backlink">↩</a></p>
    </li>
    <li id="fn:size" role="doc-endnote">
      <p>A full install if ~8M, mostly in the optional completion functions it
     ships with. Bash is about 1.3M by the way.&nbsp;<a href="#fnref:size" class="reversefootnote" role="doc-backlink">↩</a></p>
    </li>
  </ol>
</div>

			<footer class="postscript">
				<strong>Feedback</strong>
				<p>Contact me at
					<a href="mailto:martin@arp242.net">martin@arp242.net</a>,
					<a href="https://github.com/arp242/arp242.net/issues/new">GitHub</a>, or
					<a href="https://twitter.com/arp242_martin">@arp242_martin</a>
					for feedback, questions, etc.</p>
			</footer>
		</div>
		<div class="page related-posts"><strong>Other zsh posts</strong><ul class="posts"><li><span>22 May 2020</span> <a href="https://www.arp242.net/zshrc.html">Some zshrc tricks</a></li>
</ul><strong>Other Unix posts</strong><ul class="posts"><li><span>&nbsp;1 May 2019</span> <a href="https://www.arp242.net/flags-config-go.html">Using flags for configuration in Go</a></li>
<li><span>26 Dec 2017</span> <a href="https://www.arp242.net/shell-scripting-trap.html">The shell scripting trap</a></li>
<li><span>30 Apr 2019</span> <a href="https://www.arp242.net/flags-config.html">Flags are great for configuration</a></li>
<li><span>&nbsp;3 Feb 2014</span> <a href="https://www.arp242.net/cli-passwords.html">Generate passwords from the commandline</a></li>
<li><span>22 May 2020</span> <a href="https://www.arp242.net/zshrc.html">Some zshrc tricks</a></li>
<li><span>&nbsp;3 Jan 2020</span> <a href="https://www.arp242.net/tmux.html">Scripting tmux</a></li>
<li><span>15 Jan 2019</span> <a href="https://www.arp242.net/taoup.html">The Art of Unix Programming, reformatted</a></li>

<li><span>12 Dec 2019</span> <a href="https://www.arp242.net/read-stdin.html">Better UX when reading from stdin</a></li>
<li><span>15 Jan 2015</span> <a href="https://www.arp242.net/make-find-exec-faster.html">Making find -exec faster</a></li>
<li><span>&nbsp;9 Nov 2019</span> <a href="https://www.arp242.net/curl-to-sh.html">Curl to shell isn’t so bad</a></li></ul></div>
	</article>

	<aside class="side">
	<div>
		<figure><img alt="This page's author" src="data:image/jpeg;base64,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"><div class="shadow"></div></figure>
	</div>

	<div>
		<p>Personal website of <strong>Martin Tournoij</strong> (“<strong>arp242</strong>”);
			I write about programming (<a href="https://www.arp242.net/cv/">CV</a>) and various other things.</p>
		<div class="side-sep"></div>
		<p>Working on
			<a href="https://www.goatcounter.com/" data-goatcounter-click="click-gc" data-goatcounter-bound="true">GoatCounter</a> and
			<a href="https://www.arp242.net/#code">more</a>; you can support me on
			<a href="https://github.com/sponsors/arp242" target="_blank" data-goatcounter-click="click-gh-sponsor" data-goatcounter-bound="true">GitHub Sponsors</a></p>
	</div>
	<div class="side-sep"></div>
	<div>
		<p class="no-hyphen"><strong>Contact</strong>:
			<a rel="me" href="mailto:martin@arp242.net">martin@arp242.net</a>,
			<a rel="me" href="https://twitter.com/arp242_martin">@arp242_martin</a>, or
			<a href="https://github.com/arp242/arp242.net/issues/new">GitHub</a>.
		</p>

		<p style="hyphens:auto">
			<a rel="me" href="https://github.com/arp242">GitHub</a> /
			<a rel="me" href="https://stackoverflow.com/users/660921">Stack Overflow</a> /
			<a rel="me" href="https://lobste.rs/u/arp242">Lobsters</a> /
			<a rel="me" href="https://news.ycombinator.com/user?id=arp242">HN</a>
		</p>
	</div>
</aside>

</div>



	<footer id="disclaimer">
		This document is licensed under a
		<a rel="license" href="http://creativecommons.org/licenses/by/4.0/">cc-by 4.0 license</a>.
	</footer>
	
	




</body></html>
